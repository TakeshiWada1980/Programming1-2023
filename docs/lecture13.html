<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <meta name="robots" content="noindex,nofollow,noarchive" />

    <script>
      MathJax = {
        chtml: {
          displayAlign: "left",
          displayIndent: "1em",
        },
      };
    </script>

    

    <link rel="icon" href="favicon.ico" sizes="any" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
      integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=M+PLUS+Rounded+1c"
    />
    <link rel="stylesheet" href="style.css" />

    <title>第13回 2I-プログラミング1</title>
  </head>

  <body>
    <div class="openbtn"><span></span><span></span><span></span></div>
    <nav id="g-nav">
      <div id="g-nav-list">
        <!-- ---------------------------------------- -->
         <ul>
<li><a href="#準備" id="toc-準備"><span
class="toc-section-number">1</span> 準備</a></li>
<li><a href="#プログラミングを上達させるためには"
id="toc-プログラミングを上達させるためには"><span
class="toc-section-number">2</span>
プログラミングを上達させるためには</a></li>
<li><a href="#リストに格納な可能な変数の型"
id="toc-リストに格納な可能な変数の型"><span
class="toc-section-number">3</span> リストに格納な可能な変数の型</a>
<ul>
<li><a href="#演習①-1" id="toc-演習①-1"><span
class="toc-section-number">3.1</span> 演習①-1</a></li>
</ul></li>
<li><a href="#二次元リスト" id="toc-二次元リスト"><span
class="toc-section-number">4</span> 二次元リスト</a>
<ul>
<li><a href="#c言語との違い" id="toc-c言語との違い"><span
class="toc-section-number">4.1</span> C言語との違い</a></li>
<li><a href="#次元配列の様々な初期化の方法"
id="toc-次元配列の様々な初期化の方法"><span
class="toc-section-number">4.2</span>
2次元配列の様々な初期化の方法</a></li>
</ul></li>
<li><a href="#リストの浅いコピーと深いコピー"
id="toc-リストの浅いコピーと深いコピー"><span
class="toc-section-number">5</span> リストの浅いコピーと深いコピー</a>
<ul>
<li><a href="#理解のためのステップ1"
id="toc-理解のためのステップ1"><span
class="toc-section-number">5.1</span> 理解のためのステップ1</a></li>
<li><a href="#理解のためのステップ2"
id="toc-理解のためのステップ2"><span
class="toc-section-number">5.2</span> 理解のためのステップ2</a></li>
<li><a href="#理解のためのステップ3"
id="toc-理解のためのステップ3"><span
class="toc-section-number">5.3</span> 理解のためのステップ3</a></li>
<li><a href="#理解のためのステップ4"
id="toc-理解のためのステップ4"><span
class="toc-section-number">5.4</span> 理解のためのステップ4</a>
<ul>
<li><a href="#具体的なプログラムで解説①"
id="toc-具体的なプログラムで解説①"><span
class="toc-section-number">5.4.1</span>
具体的なプログラムで解説①</a></li>
<li><a href="#具体的なプログラムで解説②"
id="toc-具体的なプログラムで解説②"><span
class="toc-section-number">5.4.2</span>
具体的なプログラムで解説②</a></li>
<li><a href="#具体的なプログラムで解説③"
id="toc-具体的なプログラムで解説③"><span
class="toc-section-number">5.4.3</span>
具体的なプログラムで解説③</a></li>
</ul></li>
<li><a href="#動作の解明のためのツール-id"
id="toc-動作の解明のためのツール-id"><span
class="toc-section-number">5.5</span> 動作の解明のためのツール id()</a>
<ul>
<li><a href="#オブジェクトidからオブジェクトを参照する"
id="toc-オブジェクトidからオブジェクトを参照する"><span
class="toc-section-number">5.5.1</span>
オブジェクトIDからオブジェクトを参照する</a></li>
</ul></li>
<li><a href="#理屈は分かったものの不便ではないか"
id="toc-理屈は分かったものの不便ではないか"><span
class="toc-section-number">5.6</span>
理屈は分かったものの不便ではないか</a></li>
</ul></li>
</ul> 
        <!-- ---------------------------------------- -->
      </div>
    </nav>

    <header class="markdown-body">
      <p>2023-2I プログラミング1 第13回 講義資料</p>
      <p>2023年07月20日（木）5・6時限</p>
    </header>

    <main class="markdown-body">
      <!-- ---------------------------------------- -->
      <h1 data-number="1" id="準備"><span
      class="header-section-number">1</span> 準備</h1>
      <ul>
      <li><a
      href="https://colab.research.google.com/?hl=ja">GoogleColab.</a>
      にログインしておいてください。
      <ul>
      <li>「<strong>0720_2次元リストとバインド.ipynb</strong>」という名前でノートブックを作成しておいてください。</li>
      <li>今回はノートブックの提出は<strong>ありません</strong>。</li>
      </ul></li>
      <li>今回が「前期末試験前の最終授業」になります。次回の授業は
      9月21日(木) で <strong>約2カ月のブランク</strong>
      が生じることになります。
      <ul>
      <li>夏休み期間の宿題「 プログラミングに関する何らかの自由勉強
      (自学) の報告 」に関する詳細は、後日連絡します
      (試験期間の後半を予定)。</li>
      </ul></li>
      </ul>
      <h1 data-number="2" id="プログラミングを上達させるためには"><span
      class="header-section-number">2</span>
      プログラミングを上達させるためには</h1>
      <p>プログラミングは「<strong>語学</strong>」や「<strong>スポーツ</strong>」「<strong>楽器演奏</strong>」と同じく「方法や理論のレクチャーを受けるだけ」「解説を読むだけ」では、いつまでもモノにはなりません
      (=頭のなかの「やりたい」をプログラムとして自由に書けるようにはなりません)
      。語学、スポーツ、楽器演奏がそうであるように、実際に繰返し手を動かして試行錯誤しながら、その感覚をつかむ必要があります。</p>
      <p>例えば、バスケにおいて「<strong>コーチからレイアップシュートの指導を受けて、その後、レイアップシュートを成功させることができた</strong>」という事実から「<span
      class="masked">俺はレイアップシュートを習得した
      (これ以上は練習する必要はないし、試合でもレイアップシュートで得点をとれる)</span>」とか考えてしまう学生がいたら、かなりヤバいですよね
      ?</p>
      <p>あるいは英語で「<strong>先生から肯定文を否定文に変換する方法を習って、その後の演習問題で合格点だった</strong>」という事実から「<span
      class="masked">肯定文を否定文に変換する方法については習得した
      (これ以上は練習する必要はないし、英会話などの実践場面でも否定表現について困ることはない)</span>」と思ってしまう学生がいたら、かなりヤバいですよね
      ?</p>
      <p>これは、プログラミングでも同じで「<strong>条件分岐構文についての講義資料を読んで理解し、そのあとの演習課題もクリアした</strong>」という事実から「<strong>条件分岐構文については習得した
      (これ以上、条件分岐構文を書くような練習は不要。筆記試験でも実際の開発でも条件分岐構文については困らない)</strong>」のように錯覚する学習者にはならないでください。</p>
      <h1 data-number="3" id="リストに格納な可能な変数の型"><span
      class="header-section-number">3</span>
      リストに格納な可能な変数の型</h1>
      <p><strong>C言語</strong>における「配列」では以下のように「<strong>配列の要素を全て同じ型で統一する必要</strong>」がありました。</p>
      <div class="sourceCode" id="cb1"><pre
      class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">){</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>  <span class="co">// arr は int型のみを「要素」にする必要がある</span></span>
<span id="cb1-4"><a href="#cb1-4"></a>  <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span><span class="dv">20</span><span class="op">,</span><span class="dv">30</span><span class="op">,</span><span class="dv">40</span><span class="op">};</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="op">}</span></span></code></pre></div>
      <p>一方で、Pythonのリストでは、要素として
      <strong>異なる型を混在させること</strong>
      が可能です。以下のプログラムのリスト <code>arr</code>
      では、実際に「整数型」「文字列型」「真偽型
      (ブール型)」「リスト型」「辞書型」を混在させていますが、問題なく動作します。実際に実行して、その結果を確認してください。</p>
      <p>特に、ここではリスト <code>arr</code> の内部要素としてリスト
      <code>[66,77,88]</code> を持つことができる点に着目してください
      (このことがPythonで <strong><em>2次元リスト</em></strong>
      を実現する仕組みになります) 。</p>
      <p>なお、第04行目の <code>enumerate</code> については <a
      href="lecture12.html#enumlate">第12回講義</a> で学習済みです。</p>
      <div class="sourceCode" id="cb2"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb2-2"><a href="#cb2-2"></a>arr <span class="op">=</span> [ <span class="dv">52</span>, <span class="st">&#39;ABC&#39;</span>, <span class="va">True</span>, [<span class="dv">66</span>,<span class="dv">77</span>,<span class="dv">88</span>], {<span class="st">&#39;秀&#39;</span>:<span class="dv">5</span>, <span class="st">&#39;優&#39;</span>:<span class="dv">4</span>, <span class="st">&#39;良&#39;</span>:<span class="dv">3</span>, <span class="st">&#39;可&#39;</span>:<span class="dv">3</span>} ]</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="cf">for</span> i,a <span class="kw">in</span> <span class="bu">enumerate</span>(arr):</span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="bu">print</span>(<span class="ss">f&#39;arr[</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">] の内容は </span><span class="sc">{</span><span class="bu">str</span>(<span class="bu">type</span>(a))<span class="sc">:&lt;14}</span><span class="ss"> 型の </span><span class="sc">{</span>a<span class="sc">}</span><span class="ss"> です。&#39;</span>)</span></code></pre></div>
      <p>なお、<code>arr[3]</code> に格納されている
      <code>[66,77,88]</code> の <code>77</code>
      という数値を取得するためには <span
      class="masked"><code>arr[3][1]</code></span>
      のように記述します。また、<code>arr[4]</code> の辞書型が持つ
      <code>3</code> という数値を取得するためには <span
      class="masked"><code>arr[4]['良']</code></span>
      のように記述します。</p>
      <ul>
      <li><code>arr[3][1]</code> や <code>arr[4]['良']</code>
      という記述によって、実際に <code>77</code> と <code>3</code>
      が取得できることを確認せよ (print文で値を出力できること)。</li>
      </ul>
      <h2 data-number="3.1" id="演習①-1"><span
      class="header-section-number">3.1</span> 演習①-1</h2>
      <p><strong>期待する出力</strong>が得られるように、次のプログラムを追記せよ。</p>
      <div class="sourceCode" id="cb3"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb3-2"><a href="#cb3-2"></a>arr <span class="op">=</span> [ [<span class="dv">55</span>,<span class="dv">66</span>,<span class="dv">77</span>,<span class="dv">88</span>], {<span class="st">&#39;秀&#39;</span>:<span class="dv">5</span>, <span class="st">&#39;優&#39;</span>:<span class="dv">4</span>, <span class="st">&#39;良&#39;</span>:<span class="dv">3</span>, <span class="st">&#39;可&#39;</span>:<span class="dv">2</span>} ]</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="cf">assert</span> <span class="bu">type</span>(arr[<span class="dv">0</span>]) <span class="op">==</span> <span class="bu">list</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="cf">assert</span> <span class="bu">type</span>(arr[<span class="dv">1</span>]) <span class="op">==</span> <span class="bu">dict</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co"># ここから先にコードを追記する</span></span></code></pre></div>
      <p><strong>期待する出力</strong></p>
      <pre><code>arr[0][0] の内容は 55 です。
arr[0][1] の内容は 66 です。
arr[0][2] の内容は 77 です。
arr[0][3] の内容は 88 です。

arr[1][&#39;秀&#39;] の内容は 5 です。
arr[1][&#39;優&#39;] の内容は 4 です。
arr[1][&#39;良&#39;] の内容は 3 です。
arr[1][&#39;可&#39;] の内容は 2 です。</code></pre>
      <p>なお、ここでは次のようなプログラムを期待しているわけではない。<code>arr</code>
      と <code>for</code> の組み合わせで対応する方法を考えること。</p>
      <div class="sourceCode" id="cb5"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb5-2"><a href="#cb5-2"></a>arr <span class="op">=</span> [ [<span class="dv">55</span>,<span class="dv">66</span>,<span class="dv">77</span>,<span class="dv">88</span>], {<span class="st">&#39;秀&#39;</span>:<span class="dv">5</span>, <span class="st">&#39;優&#39;</span>:<span class="dv">4</span>, <span class="st">&#39;良&#39;</span>:<span class="dv">3</span>, <span class="st">&#39;可&#39;</span>:<span class="dv">2</span>} ]</span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="cf">assert</span> <span class="bu">type</span>(arr[<span class="dv">0</span>]) <span class="op">==</span> <span class="bu">list</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="cf">assert</span> <span class="bu">type</span>(arr[<span class="dv">1</span>]) <span class="op">==</span> <span class="bu">dict</span></span>
<span id="cb5-5"><a href="#cb5-5"></a></span>
<span id="cb5-6"><a href="#cb5-6"></a>msg<span class="op">=</span><span class="st">&#39;&#39;&#39;</span><span class="ch">\</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="st">arr[0][0] の内容は 55 です。</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="st">arr[0][1] の内容は 66 です。</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="st">arr[0][2] の内容は 77 です。</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="st">arr[0][3] の内容は 88 です。</span></span>
<span id="cb5-11"><a href="#cb5-11"></a></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="st">arr[1][&#39;秀&#39;] の内容は 5 です。</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="st">arr[1][&#39;優&#39;] の内容は 4 です。</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="st">arr[1][&#39;良&#39;] の内容は 3 です。</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="st">arr[1][&#39;可&#39;] の内容は 2 です。</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="st">&#39;&#39;&#39;</span></span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="bu">print</span>(msg)</span></code></pre></div>
      <h1 data-number="4" id="二次元リスト"><span
      class="header-section-number">4</span> 二次元リスト</h1>
      <p><strong>C言語</strong> (Arudino言語)
      では次のようなコードで「<strong>3行4列</strong>」の
      <strong><em>2次元配列</em></strong> を扱うことができました。</p>
      <div class="sourceCode" id="cb6"><pre
      class="sourceCode numberSource c numberLines"><code class="sourceCode c"><span id="cb6-1"><a href="#cb6-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">){</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="dt">int</span> i<span class="op">,</span>j<span class="op">;</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="dt">int</span> mat<span class="op">[</span><span class="dv">3</span><span class="op">][</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span> <span class="op">{</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">},</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>                    <span class="op">{</span> <span class="dv">50</span><span class="op">,</span> <span class="dv">60</span><span class="op">,</span> <span class="dv">70</span><span class="op">,</span> <span class="dv">80</span><span class="op">},</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>                    <span class="op">{</span> <span class="dv">90</span><span class="op">,</span><span class="dv">100</span><span class="op">,</span><span class="dv">110</span><span class="op">,</span><span class="dv">120</span><span class="op">}</span> <span class="op">};</span>                   </span>
<span id="cb6-7"><a href="#cb6-7"></a>  <span class="cf">for</span><span class="op">(</span>i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span><span class="dv">3</span><span class="op">;</span>i<span class="op">++){</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>    <span class="cf">for</span><span class="op">(</span>j<span class="op">=</span><span class="dv">0</span><span class="op">;</span>j<span class="op">&lt;</span><span class="dv">4</span><span class="op">;</span>j<span class="op">++){</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>      printf<span class="op">(</span><span class="st">&quot;mat[</span><span class="sc">%d</span><span class="st">][</span><span class="sc">%d</span><span class="st">]=</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span>i<span class="op">,</span>j<span class="op">,</span>mat<span class="op">[</span>i<span class="op">][</span>j<span class="op">]);</span></span>
<span id="cb6-10"><a href="#cb6-10"></a>    <span class="op">}</span></span>
<span id="cb6-11"><a href="#cb6-11"></a>  <span class="op">}</span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="op">}</span></span></code></pre></div>
      <p>この「C言語プログラム」の実行結果は次のようになります。</p>
      <pre><code>mat[0][0]=10
mat[0][1]=20
mat[0][2]=30
mat[0][3]=40
mat[1][0]=50
mat[1][1]=60
mat[1][2]=70
mat[1][3]=80
mat[2][0]=90
mat[2][1]=100
mat[2][2]=110
mat[2][3]=120</code></pre>
      <p>これと同等の「<strong>Pythonプログラム</strong>」は次のように記述することができます。なお、(1次元の)リストの初期化について忘れている場合、第08回講義の
      <a
      href="lecture08.html#リスト初期化と要素の参照">リスト初期化と要素の参照</a>
      から復習してください。</p>
      <div class="sourceCode" id="cb8" data-caption="2d-list.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="co"># mat: Matrix(行列) 2次元リストの初期化</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>mat <span class="op">=</span> [[<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>],</span>
<span id="cb8-4"><a href="#cb8-4"></a>       [<span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">80</span>],</span>
<span id="cb8-5"><a href="#cb8-5"></a>       [<span class="dv">90</span>,<span class="dv">100</span>,<span class="dv">110</span>,<span class="dv">120</span>]]</span>
<span id="cb8-6"><a href="#cb8-6"></a></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co"># row: Row(行)</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="cf">for</span> i,row <span class="kw">in</span> <span class="bu">enumerate</span>(mat):</span>
<span id="cb8-9"><a href="#cb8-9"></a>  <span class="cf">for</span> j, e <span class="kw">in</span> <span class="bu">enumerate</span>(row) :</span>
<span id="cb8-10"><a href="#cb8-10"></a>    <span class="bu">print</span>(<span class="ss">f&#39;mat[</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">][</span><span class="sc">{</span>j<span class="sc">}</span><span class="ss">]=</span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">&#39;</span>)</span></code></pre></div>
      <p>上記のプログラムが理解できない場合、まずは次のように <span
      class="masked">プログラムの途中に <code>print</code>
      文を挿入するなど、自分で手を動かし、動作を確認・理解するように努めてください</span>。</p>
      <div class="sourceCode" id="cb9"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co"># mat: Matrix(行列)</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>mat <span class="op">=</span> [[<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>],</span>
<span id="cb9-4"><a href="#cb9-4"></a>       [<span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">80</span>],</span>
<span id="cb9-5"><a href="#cb9-5"></a>       [<span class="dv">90</span>,<span class="dv">100</span>,<span class="dv">110</span>,<span class="dv">120</span>]]</span>
<span id="cb9-6"><a href="#cb9-6"></a></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co"># row: Row(行)</span></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="cf">for</span> i,row <span class="kw">in</span> <span class="bu">enumerate</span>(mat): </span>
<span id="cb9-9"><a href="#cb9-9"></a>  <span class="bu">print</span>(<span class="ss">f&#39;mat[</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">]=</span><span class="sc">{</span>row<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># 追加：ループ変数 i と row の内容を確認</span></span>
<span id="cb9-10"><a href="#cb9-10"></a>  <span class="co"># for j, e in enumerate(row) :    # 不明な範囲はコメントアウト</span></span>
<span id="cb9-11"><a href="#cb9-11"></a>  <span class="co">#   print(f&#39;mat[{i}][{j}]={e}&#39;)   # 不明な範囲はコメントアウト</span></span></code></pre></div>
      <h2 data-number="4.1" id="c言語との違い"><span
      class="header-section-number">4.1</span> C言語との違い</h2>
      <p>C言語で2次元配列を構成した場合、<strong>行の要素数 (=列の長さ)
      を全て同じにする必要</strong>
      がありました。一方、Pythonの2次元リストでは、<strong>行ごとの要素数が異なっていても</strong>問題ありません。</p>
      <p>次のプログラムを実行し<strong>行ごとの要素数が異なっていても問題ないこと</strong>を確認してください。</p>
      <div class="sourceCode" id="cb10"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb10-2"><a href="#cb10-2"></a>arr2 <span class="op">=</span> [[<span class="dv">10</span>, <span class="dv">20</span>],          <span class="co"># 要素数2</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>        [<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>],  <span class="co"># 要素数4</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>        [<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>]]      <span class="co"># 要素数3</span></span>
<span id="cb10-5"><a href="#cb10-5"></a></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="cf">for</span> i,row <span class="kw">in</span> <span class="bu">enumerate</span>(arr2):</span>
<span id="cb10-7"><a href="#cb10-7"></a>  <span class="cf">for</span> j, e <span class="kw">in</span> <span class="bu">enumerate</span>(row) :</span>
<span id="cb10-8"><a href="#cb10-8"></a>    <span class="bu">print</span>(<span class="ss">f&#39;mat[</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">][</span><span class="sc">{</span>j<span class="sc">}</span><span class="ss">]=</span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">&#39;</span>)</span></code></pre></div>
      <h2 data-number="4.2" id="次元配列の様々な初期化の方法"><span
      class="header-section-number">4.2</span>
      2次元配列の様々な初期化の方法</h2>
      <p>次の各プログラムは、どれも同じように2次元リスト
      <code>mat</code>
      を初期化します。いずれの初期化方法も読み書きできるようになっておいてください
      (自分では使わない初期化方法でも、プロジェクトメンバーの誰かが使う可能性があります)
      。</p>
      <p>なお、<span
      class="masked">どの方法で初期化するのが最善であるかは状況によって異なります</span>。また、第10回講義の<a
      href="lecture10.html#リスト操作の負荷量の比較">リスト操作の負荷量の比較</a>についても、再度確認しておいてください。</p>
      <p>プログラムは眺めだけでは身に付かないので、少なくとも貼り付けして、実行してください。</p>
      <div class="sourceCode" id="cb11"
      data-caption="list_init1.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb11-2"><a href="#cb11-2"></a>mat <span class="op">=</span> [[<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>],[<span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>]] <span class="co"># 行単位の改行は必須ではない</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="bu">print</span>(mat)</span></code></pre></div>
      <div class="sourceCode" id="cb12"
      data-caption="list_init2.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb12-2"><a href="#cb12-2"></a>mat <span class="op">=</span> [] <span class="co"># 長さ0のリスト (空のリスト) を作成</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>mat.append([<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>]) <span class="co"># 要素にリストを追加</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>mat.append([<span class="dv">40</span>,<span class="dv">50</span>,<span class="dv">60</span>])</span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="bu">print</span>(mat)</span></code></pre></div>
      <div class="sourceCode" id="cb13"
      data-caption="list_init3.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb13-2"><a href="#cb13-2"></a>mat <span class="op">=</span> [<span class="dv">0</span>]<span class="op">*</span><span class="dv">2</span>  <span class="co"># 長さ2のリストを作成。[1]*2 でも [None]*2 でもよい</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>mat[<span class="dv">0</span>] <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>] <span class="co"># 0番目の要素を上書き</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>mat[<span class="dv">1</span>] <span class="op">=</span> [<span class="dv">40</span>,<span class="dv">50</span>,<span class="dv">60</span>]</span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="bu">print</span>(mat)</span></code></pre></div>
      <div class="sourceCode" id="cb14"
      data-caption="list_init4.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb14-2"><a href="#cb14-2"></a>mat <span class="op">=</span> [ [<span class="dv">0</span>]<span class="op">*</span><span class="dv">3</span>, [<span class="dv">0</span>]<span class="op">*</span><span class="dv">3</span> ]  <span class="co"># mat = [[0]*3]*2 では予期せぬ結果</span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="co"># print(mat)</span></span>
<span id="cb14-4"><a href="#cb14-4"></a>mat[<span class="dv">0</span>][<span class="dv">0</span>] <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>mat[<span class="dv">0</span>][<span class="dv">1</span>] <span class="op">=</span> <span class="dv">20</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>mat[<span class="dv">0</span>][<span class="dv">2</span>] <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb14-7"><a href="#cb14-7"></a>mat[<span class="dv">1</span>][<span class="dv">0</span>] <span class="op">=</span> <span class="dv">40</span></span>
<span id="cb14-8"><a href="#cb14-8"></a>mat[<span class="dv">1</span>][<span class="dv">1</span>] <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb14-9"><a href="#cb14-9"></a>mat[<span class="dv">1</span>][<span class="dv">2</span>] <span class="op">=</span> <span class="dv">60</span></span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="bu">print</span>(mat)</span></code></pre></div>
      <div class="sourceCode" id="cb15"
      data-caption="list_init5.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb15-2"><a href="#cb15-2"></a>mat <span class="op">=</span> [ [<span class="dv">0</span>]<span class="op">*</span><span class="dv">3</span>, [<span class="dv">0</span>]<span class="op">*</span><span class="dv">3</span> ]  <span class="co"># mat = [[0]*3]*2 では予期せぬ結果</span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">6</span>):</span>
<span id="cb15-4"><a href="#cb15-4"></a>  mat[i<span class="op">//</span><span class="dv">3</span>][i<span class="op">%</span><span class="dv">3</span>] <span class="op">=</span> (i<span class="op">+</span><span class="dv">1</span>)<span class="op">*</span><span class="dv">10</span></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="bu">print</span>(mat)</span></code></pre></div>
      <p>特に <code>list_init4.py</code> において
      <code>mat = [ [0]*3, [0]*3 ]</code> ではなく
      <code>mat = [[0]*3]*2</code>
      のように初期化すると「予期せぬ結果」になることを
      <strong>実際に確認</strong> (<strong><em>超重要</em></strong>)
      してください。その際、第03行目の <code>print</code>
      もアンコメントして考察してみてください。</p>
      <h1 data-number="5" id="リストの浅いコピーと深いコピー"><span
      class="header-section-number">5</span>
      リストの浅いコピーと深いコピー</h1>
      <p>実用的なプログラムを作成する場合、リストや辞書の利用は必要不可欠です。そして、リストや辞書を使用する場合に、十分に理解しておかないと<strong>ハマるもの
      (詰むもの) </strong>として
      <strong><em>浅いコピー/深いコピー</em></strong>
      という概念があります。</p>
      <p>また、またそれと密接に関連する概念として
      <strong><em>オブジェクトID</em></strong>、<strong><em>バインド(束縛)</em></strong>、<strong><em>ミュータブル／イミュータブル</em></strong>
      というものがあります。</p>
      <p>C言語の学習では「<strong>ポインタ</strong>」という概念/仕組みの壁を超えられずに脱落・挫折する人が多いことがよく知られています。同様にPythonの「<strong>浅いコピー/深いコピー</strong>」や「<strong>オブジェクトID</strong>」も
      <strong><em>初学者にとって大きな壁</em></strong>
      となります。一旦、理解してしまえば何ということもない概念・仕組みなのですが、初めて学ぶときには「非常に難解」「理解不能」という印象を受けると思います。しかし、ここの<strong>壁を超えて本質的な理解を得ないと今後の開発や学習に多大な支障</strong>が生じることになります
      (例えれば <span
      class="masked">分数や小数の本質を理解しないままに中学数学に取り組むようなもの</span>
      です) 。</p>
      <p>ここからの先の内容は
      <strong>多くの人にとって簡単に理解できるものではない、少なくとも数時間、2週間～1が月程度は悩むものという前提で挑んでください</strong>
      (1時間悩んで理解できないからと諦めないでください、2・3日の時間をあけて見直すことで理解できることも多々あります)
      。取り組む際のポイントは <span class="masked">頭で悩む (考える)
      だけではなくて「調べる」と「試す」をバランスよく組み合わせる</span>
      ことです
      。また、このテキストだけではなくウェブやYouTubeなどの様々な資料や解説もあわせて理解に努めてください。</p>
      <div class="note type-tips">
      <p><strong>アドバイス</strong></p>
      <p>ここから先、これまでに皆さんが頭のなかに築いてきた「プログラムの動作モデル」を<strong>破壊</strong>し<strong>再構築</strong>してもらう内容になります。例えれば「昼と夜があるのは太陽が動くから」と思っている幼稚園児や小学生に「昼と夜があるのは、実は太陽が動くからじゃなくて
      、地球が自転してるから」と理解してもらう、それを受け入れてもらうような内容になります。</p>
      <p>「地球は平面であり、また動いているのは太陽である」という理解のほうが直感的であり、また、その解釈であっても
      (身近な生活に関わるようなことは)
      ほとんど矛盾なく説明ができてしまいます。それゆえに「意味不明」と思考停止し、理解の追及を諦めてしまう子供もいます。</p>
      </div>
      <h2 data-number="5.1" id="理解のためのステップ1"><span
      class="header-section-number">5.1</span>
      理解のためのステップ1</h2>
      <p>次のプログラムの<strong>第20行目の実行結果 (出力)
      </strong>について考えてみてください。そのうえでプログラムを実行し、「実際の実行結果
      (出力)」と「自分の考えた実行結果
      (出力)」を比較してみてください。</p>
      <div class="sourceCode" id="cb16" data-caption="step1-1.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb16-2"><a href="#cb16-2"></a></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="co"># a の初期化</span></span>
<span id="cb16-4"><a href="#cb16-4"></a>a <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>]</span>
<span id="cb16-5"><a href="#cb16-5"></a></span>
<span id="cb16-6"><a href="#cb16-6"></a><span class="co"># b に a をコピー (ここがポイントです)</span></span>
<span id="cb16-7"><a href="#cb16-7"></a>b <span class="op">=</span> a</span>
<span id="cb16-8"><a href="#cb16-8"></a></span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="co"># a と b の内容を確認</span></span>
<span id="cb16-10"><a href="#cb16-10"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; a=[10, 20, 30]</span></span>
<span id="cb16-11"><a href="#cb16-11"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; b=[10, 20, 30]</span></span>
<span id="cb16-12"><a href="#cb16-12"></a></span>
<span id="cb16-13"><a href="#cb16-13"></a><span class="cf">assert</span> a <span class="op">==</span> b   <span class="co"># a と b が「等しいこと」を念のために確認 </span></span>
<span id="cb16-14"><a href="#cb16-14"></a></span>
<span id="cb16-15"><a href="#cb16-15"></a><span class="co"># a の2番目の要素を変更</span></span>
<span id="cb16-16"><a href="#cb16-16"></a>a[<span class="dv">2</span>] <span class="op">=</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb16-17"><a href="#cb16-17"></a></span>
<span id="cb16-18"><a href="#cb16-18"></a><span class="co"># a と b の内容を確認</span></span>
<span id="cb16-19"><a href="#cb16-19"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; a=[10, 20, -1]</span></span>
<span id="cb16-20"><a href="#cb16-20"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; ??? どのうような出力を得るか ???</span></span></code></pre></div>
      <p>今度は、上記の<strong>第07行目</strong>の <code>b=a</code> を
      <code>b=[10,20,30]</code>
      に書き換えて、その実行結果を確認してください。</p>
      <p><strong>なぜ、このような結果の違いが生じるのか</strong>を、ここから順を追って考え謎を解明していきます。</p>
      <p>まず、「ここで不可解と感じること」は上記の
      <code>step1-1.py</code>
      の<strong>第16行目</strong>で、<code>a[2] = -1</code> のように
      <span
      class="masked">リスト<code>a</code>を対象に要素の書き換えをしている</span>
      はずが、どういうわけか <span
      class="masked">リスト<code>b</code>に対しても影響を与えている</span>
      ことだと思います。</p>
      <p>このようなことは、少なくとも以下の <code>step1-2.py</code>
      のように 変数 <code>a</code>
      に<strong>整数値を代入するケースでは生じていませんでした</strong>
      (実際に実行して確かめてください)。</p>
      <div class="sourceCode" id="cb17" data-caption="step1-2.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb17-2"><a href="#cb17-2"></a>a <span class="op">=</span> <span class="dv">30</span> <span class="co"># リストではなく整数値</span></span>
<span id="cb17-3"><a href="#cb17-3"></a>b <span class="op">=</span> a</span>
<span id="cb17-4"><a href="#cb17-4"></a></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="co"># a と b の内容を確認</span></span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; a=30</span></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; b=30</span></span>
<span id="cb17-8"><a href="#cb17-8"></a></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="cf">assert</span> a <span class="op">==</span> b   <span class="co"># a と b が「等しいこと」を念のために確認 </span></span>
<span id="cb17-10"><a href="#cb17-10"></a></span>
<span id="cb17-11"><a href="#cb17-11"></a><span class="co"># 変数 a に変更をくわえる</span></span>
<span id="cb17-12"><a href="#cb17-12"></a>a <span class="op">=</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb17-13"><a href="#cb17-13"></a></span>
<span id="cb17-14"><a href="#cb17-14"></a><span class="co"># a と b の内容を確認</span></span>
<span id="cb17-15"><a href="#cb17-15"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; a=-1</span></span>
<span id="cb17-16"><a href="#cb17-16"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; b=30  ここでは b は影響を受けていない。</span></span></code></pre></div>
      <p>まずは、リストが関係するときだけに生じる不思議な挙動を「しっかりと認識する」ために、以下の
      <code>step1-3.py</code>
      を使って実験してみます。ここまでのことを踏まえて、以下のプログラムの実行結果を<strong>十分に検討・予想したうえで</strong>、実行して、その結果を確認してください。</p>
      <div class="sourceCode" id="cb18" data-caption="step1-3.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb18-2"><a href="#cb18-2"></a>a <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>]</span>
<span id="cb18-3"><a href="#cb18-3"></a>b <span class="op">=</span> a</span>
<span id="cb18-4"><a href="#cb18-4"></a>c <span class="op">=</span> a</span>
<span id="cb18-5"><a href="#cb18-5"></a>a[<span class="dv">0</span>] <span class="op">=</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb18-6"><a href="#cb18-6"></a>b[<span class="dv">1</span>] <span class="op">=</span> <span class="op">-</span><span class="dv">2</span></span>
<span id="cb18-7"><a href="#cb18-7"></a>c[<span class="dv">2</span>] <span class="op">=</span> <span class="op">-</span><span class="dv">3</span></span>
<span id="cb18-8"><a href="#cb18-8"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># 出力はどうなるか</span></span>
<span id="cb18-9"><a href="#cb18-9"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># 出力はどうなるか</span></span>
<span id="cb18-10"><a href="#cb18-10"></a><span class="bu">print</span>(<span class="ss">f&#39;c=</span><span class="sc">{</span>c<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># 出力はどうなるか</span></span></code></pre></div>
      <p>上記 <code>step1-3.py</code>
      の<strong>第03行目以降</strong>を色々と書き換え
      (例えば、<strong>第04行目</strong>を <code>c=a</code> から
      <code>c=b</code> に書き換えるなどして)
      、その挙動について考察してみたり、仮説を立ててみたりしてください。現段階では「<strong>なぜ、このような結果となるか</strong>」ではなく、まずは「<span
      class="masked">(仕組みはブラックボックスでかまわないので、結果として)
      どのような結果となるか</span>」を考えてみてください。</p>
      <p>また、次の <code>step1-4.py</code> のように変数 <code>a</code>
      に対して <code>pop()</code>
      で「要素数を減らす操作」をするとどうなるか、確認してみてください。</p>
      <div class="sourceCode" id="cb19" data-caption="step1-4.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb19-2"><a href="#cb19-2"></a>a <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>]</span>
<span id="cb19-3"><a href="#cb19-3"></a>b <span class="op">=</span> a</span>
<span id="cb19-4"><a href="#cb19-4"></a>c <span class="op">=</span> a</span>
<span id="cb19-5"><a href="#cb19-5"></a>a.pop() <span class="co"># 末尾の要素を削除</span></span>
<span id="cb19-6"><a href="#cb19-6"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; [10,20]</span></span>
<span id="cb19-7"><a href="#cb19-7"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># 出力はどうなるか</span></span>
<span id="cb19-8"><a href="#cb19-8"></a><span class="bu">print</span>(<span class="ss">f&#39;c=</span><span class="sc">{</span>c<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># 出力はどうなるか</span></span></code></pre></div>
      <h2 data-number="5.2" id="理解のためのステップ2"><span
      class="header-section-number">5.2</span>
      理解のためのステップ2</h2>
      <p>(十分に手を動かして結果について分析すれば) 以下の
      <code>step2-1.py</code>
      ようなプログラムでは、<strong>第05行目</strong>以降で変数
      <code>a</code> に対して何らかの操作をすると「<span
      class="masked">変数 <code>b</code> と 変数 <code>c</code>
      に対しても同じ操作が連動して適用されるような挙動を示すのではないか</span>」あるいは「<span
      class="masked">(連動しているのではなく) 変数 <code>a</code> と
      <code>b</code> と <code>c</code> の実体は同じモノではないのか
      (Windowsファイルシステムのショートカットのように、ひとつの実体に対して複数のアクセス手段を持っている状態になっているのではないか)</span>」といった仮説が立てられると思います。</p>
      <div class="sourceCode" id="cb20" data-caption="step2-1.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb20-2"><a href="#cb20-2"></a>a <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>]</span>
<span id="cb20-3"><a href="#cb20-3"></a>b <span class="op">=</span> a</span>
<span id="cb20-4"><a href="#cb20-4"></a>c <span class="op">=</span> a</span></code></pre></div>
      <p>ところで、次の <code>step2-2.py</code>
      ようなプログラムは試したでしょうか。結果を予測したうえで、実際に結果を確認してみてください。</p>
      <div class="sourceCode" id="cb21" data-caption="step2-2.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb21-2"><a href="#cb21-2"></a>a <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>]</span>
<span id="cb21-3"><a href="#cb21-3"></a>b <span class="op">=</span> a</span>
<span id="cb21-4"><a href="#cb21-4"></a>c <span class="op">=</span> a</span>
<span id="cb21-5"><a href="#cb21-5"></a>a <span class="op">=</span> [<span class="dv">60</span>,<span class="dv">70</span>,<span class="dv">80</span>] <span class="co"># a[0]=1 や a.pop() のような操作ではない点に注意!!</span></span>
<span id="cb21-6"><a href="#cb21-6"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; [60,70,80]</span></span>
<span id="cb21-7"><a href="#cb21-7"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># 出力はどうなるか</span></span>
<span id="cb21-8"><a href="#cb21-8"></a><span class="bu">print</span>(<span class="ss">f&#39;c=</span><span class="sc">{</span>c<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># 出力はどうなるか</span></span></code></pre></div>
      <p>これにより <span class="masked">さらに混乱してきた</span>
      と思います。</p>
      <h2 data-number="5.3" id="理解のためのステップ3"><span
      class="header-section-number">5.3</span>
      理解のためのステップ3</h2>
      <p>ここまでの状況を整理してみます。まず、次の
      <code>step3-1a.py</code> や <code>step3-1b.py</code> のように変数
      <code>a</code>
      に代入しているものが「整数型」や「文字列型」のときは直感に反しない動作となります。ここでは、念のために
      <code>assert</code> を使って <code>a</code> と <code>b</code>
      が「等しくないこと」も確認しています。以下のプログラムを実際に実行して結果を確認してください。</p>
      <div class="sourceCode" id="cb22" data-caption="step3-1a.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb22-2"><a href="#cb22-2"></a>a <span class="op">=</span> <span class="dv">10</span> <span class="co"># aに代入するのは整数型</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>b <span class="op">=</span> a</span>
<span id="cb22-4"><a href="#cb22-4"></a>a <span class="op">=</span> a<span class="op">+</span><span class="dv">1</span></span>
<span id="cb22-5"><a href="#cb22-5"></a><span class="cf">assert</span> a <span class="op">!=</span> b</span>
<span id="cb22-6"><a href="#cb22-6"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; a=11</span></span>
<span id="cb22-7"><a href="#cb22-7"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; b=10</span></span></code></pre></div>
      <div class="sourceCode" id="cb23" data-caption="step3-1b.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb23-2"><a href="#cb23-2"></a>a <span class="op">=</span> <span class="st">&#39;ABC&#39;</span> <span class="co"># aに代入するのは文字列型</span></span>
<span id="cb23-3"><a href="#cb23-3"></a>b <span class="op">=</span> a</span>
<span id="cb23-4"><a href="#cb23-4"></a>a <span class="op">=</span> a<span class="op">+</span><span class="st">&#39;DEF&#39;</span></span>
<span id="cb23-5"><a href="#cb23-5"></a><span class="cf">assert</span> a <span class="op">!=</span> b</span>
<span id="cb23-6"><a href="#cb23-6"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; a=ABCDEF</span></span>
<span id="cb23-7"><a href="#cb23-7"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; b=ABC</span></span></code></pre></div>
      <p>また、変数 <code>a</code>
      に代入しているものがリストであっても、次の
      <code>step3-2a.py</code> のように<strong>第04行目</strong>で
      <code>a = [10,10,30]</code> とした場合は直感に反しない動作
      (変数<code>b</code>は影響を受けていない結果)
      となります。実際に実行して結果を確認してください。</p>
      <div class="sourceCode" id="cb24" data-caption="step3-2a.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb24-2"><a href="#cb24-2"></a>a <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>]</span>
<span id="cb24-3"><a href="#cb24-3"></a>b <span class="op">=</span> a</span>
<span id="cb24-4"><a href="#cb24-4"></a>a <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">10</span>,<span class="dv">30</span>] <span class="co"># a[2]が10</span></span>
<span id="cb24-5"><a href="#cb24-5"></a><span class="cf">assert</span> a <span class="op">!=</span> b</span>
<span id="cb24-6"><a href="#cb24-6"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; [10,10,30] </span></span>
<span id="cb24-7"><a href="#cb24-7"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; [10,20,30]</span></span></code></pre></div>
      <p>しかし、上記 <code>step3-2a.py</code>
      の<strong>第04行目</strong>を <code>a = [10,10,30]</code> から
      <code>a.pop()</code> や <code>a[1]=10</code>
      に書き換えると、アサート文に引っかかるようになってしまいます
      (つまり、<code>a</code> と <code>b</code>
      は「等しい」と判定されます)
      。ここでも、面倒がらずに実行して結果を確認してください。</p>
      <div class="sourceCode" id="cb25" data-caption="step3-2b.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb25-2"><a href="#cb25-2"></a>a <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>]</span>
<span id="cb25-3"><a href="#cb25-3"></a>b <span class="op">=</span> a</span>
<span id="cb25-4"><a href="#cb25-4"></a>a.pop() <span class="co"># あるいは a[1]=10</span></span>
<span id="cb25-5"><a href="#cb25-5"></a><span class="cf">assert</span> a <span class="op">!=</span> b</span>
<span id="cb25-6"><a href="#cb25-6"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb25-7"><a href="#cb25-7"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># ???</span></span></code></pre></div>
      <p>そして、上記の <code>step3-2b.py</code>
      のアサート文をコメントアウトして <strong>第07行目</strong> で変数
      <code>b</code> の値の出力すると、まるで「<code>a</code>
      に対する操作 ( <code>a.pop()</code> や <code>a[1]=10</code> ) が
      <code>b</code>
      に対しても連動して適用されている」あるいは「<code>a</code> と
      <code>b</code>
      が同じ実体を指すショートカットのように機能している」といえる結果となります。</p>
      <p>一方で、<code>step3-2b.py</code> の第03行目を <code>b=a</code>
      から <code>b = [10,20,30]</code> にすれば、<code>a</code> と
      <code>b</code> は独立した変数として振る舞うようになります
      (アサート文にもひっかかることがありません)。</p>
      <div class="sourceCode" id="cb26" data-caption="step3-2c.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb26-2"><a href="#cb26-2"></a>a <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>]</span>
<span id="cb26-3"><a href="#cb26-3"></a>b <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>] <span class="co"># ここを書き換えた</span></span>
<span id="cb26-4"><a href="#cb26-4"></a>a.pop()</span>
<span id="cb26-5"><a href="#cb26-5"></a><span class="cf">assert</span> a <span class="op">!=</span> b</span>
<span id="cb26-6"><a href="#cb26-6"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; a=[10, 20]</span></span>
<span id="cb26-7"><a href="#cb26-7"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; b=[10, 20, 30]</span></span></code></pre></div>
      <p>以上のようにPythonプログラムが振る舞ることは、<strong>どのように説明をつけることができるのでしょうか</strong>。</p>
      <h2 data-number="5.4" id="理解のためのステップ4"><span
      class="header-section-number">5.4</span>
      理解のためのステップ4</h2>
      <p>結論から言えば、次のような解釈から <code>step3-2b.py</code>
      のようなPythonプログラムの振る舞いを全て説明することができます。</p>
      <ol type="1">
      <li>Pythonにおいて「データを抽象的に表したもの」を
      <strong><em>オブジェクト</em></strong>
      とよび、具体的には「整数」「実数」「文字列」「リスト」「辞書」…のように、<strong>変数に代入可能な全てのものは「オブジェクト」に位置づけられます</strong>。例えば
      <code>10</code> も <code>'ABC'</code> も <code>[10,20,30]</code>
      も <code>True</code>
      も全て変数に代入可能なデータであり、したがってオブジェクトとなります。</li>
      <li>プログラム実行中に新たにオブジェクトが作成されると、そのオブジェクトには
      <strong><em>オブジェクトID</em></strong> という<strong>識別子
      (番号)
      が自動的に割り振られます</strong>。この「オブジェクトID」は、他のオブジェクトIDとは重複しない固有の整数値
      (int型)
      であり、それは「オブジェクト」と<strong>1対1の関係</strong>になります。</li>
      <li>プログラム内部では「オブジェクトID」から「オブジェクトの本体
      (つまりデータ)」にアクセスすることができます。</li>
      <li>プログラミング初学者に対して、<code>a=10</code> について「
      <code>a</code> <strong>という箱に</strong> <code>10</code>
      <strong>という値を入れる</strong>」と解釈するように説明することが多いですが、<strong>実は正しくありません</strong>
      (実際、この解釈では <code>step3-2b.py</code>
      のような実行結果になることを説明できません)。</li>
      <li><code>a=10</code> については「<code>10</code>
      <strong>というオブジェクトを生成し、その「オブジェクトID」を変数</strong>
      <code>a</code>
      <strong>に格納する</strong>」が、より正確な説明・解釈となります。</li>
      <li>同様に <code>print(a)</code> は「変数 <code>a</code>
      に格納されている値を表示する」ではなく「変数 <code>a</code>
      に格納されている「オブジェクトID」からアクセスできる「オブジェクト」の値を表示する」というのが、より厳密な説明になります。</li>
      <li>このように、変数に対して (オブジェクトそのものではなく）
      オブジェクトを一意に特定できるオブジェクトIDを格納することを
      <strong><em>バインド</em></strong>
      と表現します。バインドとは「<strong>束縛する、結びつける、紐づける</strong>」という意味で、ここでは「変数」と「オブジェクト」を<strong>紐づけする</strong>という意味で使われます。</li>
      <li>以上より <code>a=10</code> は「変数 <code>a</code> に
      <code>10</code> を格納する」ではなく「変数 <code>a</code>
      と、<code>10</code> というオブジェクトを (オブジェクトIDを通して)
      バインドする (紐づけする)」と解釈するのが適切です。</li>
      </ol>
      <p>バインドについては、実は <a
      href="lecture02.html#変数の埋め込み">第02回講義</a>
      でも触れていました。</p>
      <h3 data-number="5.4.1" id="具体的なプログラムで解説①"><span
      class="header-section-number">5.4.1</span>
      具体的なプログラムで解説①</h3>
      <p>次のプログラムを使って動作を具体的に解説していきます。</p>
      <div class="sourceCode" id="cb27" data-caption="step4-1.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb27-2"><a href="#cb27-2"></a>a <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>]</span>
<span id="cb27-3"><a href="#cb27-3"></a>b <span class="op">=</span> a</span>
<span id="cb27-4"><a href="#cb27-4"></a>a[<span class="dv">1</span>]<span class="op">=</span><span class="dv">40</span></span>
<span id="cb27-5"><a href="#cb27-5"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; a=[10, 40, 30]</span></span>
<span id="cb27-6"><a href="#cb27-6"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; b=[10, 40, 30]</span></span></code></pre></div>
      <p><strong>第02行目</strong> : <code>[10,20,30]</code>
      というオブジェクトを生成し、その「オブジェクトID」を変数
      <code>a</code> に格納する。<br>厳密には <span
      class="masked"><code>10</code>
      というオブジェクトを生成しその「オブジェクトID」を0番目の要素、<code>20</code>
      というオブジェクトを生成しその「オブジェクトID」を1番目の要素、<code>30</code>
      というオブジェクトを生成しその「オブジェクトID」を2番目の要素とするリスト型</span>
      のオブジェクトを生成し、その「オブジェクトID」を変数
      <code>a</code> に格納する。</p>
      <p><strong>第03行目</strong> : 変数 <code>a</code>
      に格納されている「オブジェクトID」をコピー (複製) して変数
      <code>b</code> に格納する。ここで <code>a</code> から
      <code>b</code> に<strong>コピー (複製)
      されたのは「オブジェクト」ではなく「オブジェクトID」である</strong>ことに注意する。この結果、変数
      <code>a</code> と 変数 <code>b</code>
      に格納されている「オブジェクトID」は同じものとなった。</p>
      <p><strong>第04行目</strong> : <code>40</code>
      というオブジェクトを生成し、その「オブジェクトID」を「変数
      <code>a</code>
      に格納されているオブジェクトIDに紐づくリスト型のオブジェクト」の１番目の要素に上書きする。</p>
      <p><strong>第05行目</strong> : 変数 <code>a</code>
      に格納されている「オブジェクトID」に紐づいたリスト型オブジェクトの値を表示する。</p>
      <p><strong>第06行目</strong> : 変数 <code>b</code>
      に格納されているオブジェクトID (＝変数 <code>a</code>
      に格納されている「オブジェクトID」と同じ)
      に紐づいたリスト型オブジェクトの値を表示する。</p>
      <p>以上の解釈・説明によって、<strong>第06行目</strong>の出力が
      <code>b=[10, 40, 30]</code> となることが自然に説明できました。</p>
      <h3 data-number="5.4.2" id="具体的なプログラムで解説②"><span
      class="header-section-number">5.4.2</span>
      具体的なプログラムで解説②</h3>
      <p>次のプログラムを使って動作を具体的に解説していきます。</p>
      <div class="sourceCode" id="cb28" data-caption="step4-2.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb28-2"><a href="#cb28-2"></a>a <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>]</span>
<span id="cb28-3"><a href="#cb28-3"></a>b <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>]  <span class="co"># ここを書き換えた</span></span>
<span id="cb28-4"><a href="#cb28-4"></a>a[<span class="dv">1</span>]<span class="op">=</span><span class="dv">40</span></span>
<span id="cb28-5"><a href="#cb28-5"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; a=[10, 40, 30]</span></span>
<span id="cb28-6"><a href="#cb28-6"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; b=[10, 20, 30] # ここの結果が異なる</span></span></code></pre></div>
      <p><strong>第02行目</strong> : <code>[10,20,30]</code>
      というオブジェクトを生成し、その「オブジェクトID」を変数
      <code>a</code> に格納する。</p>
      <p><strong>第03行目</strong> : 新たに <code>[10,20,30]</code>
      というオブジェクトを生成し、そのオブジェクトIDを変数
      <code>b</code>
      に格納する。<strong>第02行目</strong>で生成されたオブジェクトと、この<strong>第03行目</strong>で生成されたオブジェクトは
      (値は同じであるが)
      別物なので、当然、そのオブジェクトIDは違う。</p>
      <p><strong>第04行目</strong> : <code>40</code>
      というオブジェクトを生成しその「オブジェクトID」を、「変数
      <code>a</code>
      に格納されているオブジェクトIDに紐づくリスト型オブジェクト」の１番目の要素に格納する。</p>
      <p><strong>第05行目</strong> : 変数 <code>a</code>
      に格納されている「オブジェクトID」に紐づいたリスト型のオブジェクトの値を表示する。</p>
      <p><strong>第06行目</strong> : 変数 <code>b</code>
      に格納されているオブジェクトID (＝変数 <code>a</code>
      に格納されている「オブジェクトID」とは<strong>違う</strong>)
      に紐づいたリスト型のオブジェクトの値を表示する。</p>
      <p>以上の解釈・説明によって、<strong>第06行目</strong>の出力が
      <code>b=[10, 20, 30]</code> となることが自然に説明できました。</p>
      <h3 data-number="5.4.3" id="具体的なプログラムで解説③"><span
      class="header-section-number">5.4.3</span>
      具体的なプログラムで解説③</h3>
      <p>次のプログラムを使って動作を具体的に解説していきます。</p>
      <div class="sourceCode" id="cb29" data-caption="step4-3.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb29-2"><a href="#cb29-2"></a>a <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb29-3"><a href="#cb29-3"></a>b <span class="op">=</span> a</span>
<span id="cb29-4"><a href="#cb29-4"></a>a <span class="op">=</span> a<span class="op">+</span><span class="dv">1</span></span>
<span id="cb29-5"><a href="#cb29-5"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; a=11</span></span>
<span id="cb29-6"><a href="#cb29-6"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; b=10</span></span></code></pre></div>
      <p><strong>第02行目</strong> : <code>10</code>
      というオブジェクトを生成し、その「オブジェクトID」を変数
      <code>a</code> に格納する。</p>
      <p><strong>第03行目</strong> : 変数 <code>a</code>
      に格納されている「オブジェクトID」を変数 <code>b</code>
      にコピー(複製)する。</p>
      <p><strong>第04行目</strong> : 変数 <code>a</code>
      に格納されている「オブジェクトID」に紐づくオブジェクト (つまり
      <code>10</code> ) と、<code>1</code> を加算することで、新たなに
      <code>11</code>
      という新たなオブジェクトを生成し、その「オブジェクトID」を変数
      <code>a</code> に格納する。</p>
      <p><strong>第05行目</strong> : 変数 <code>a</code>
      に格納されている「オブジェクトID」に紐づいたオブジェクトの値を表示する。</p>
      <p><strong>第06行目</strong> : 変数 <code>b</code>
      に格納されている「オブジェクトID」に紐づいたオブジェクトの値を表示する。</p>
      <h2 data-number="5.5" id="動作の解明のためのツール-id"><span
      class="header-section-number">5.5</span> 動作の解明のためのツール
      id()</h2>
      <p>オブジェクトIDは <code>id()</code>
      という組み込み関数で調べることができます。</p>
      <div class="sourceCode" id="cb30" data-caption="id1.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb30-2"><a href="#cb30-2"></a>a <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>]</span>
<span id="cb30-3"><a href="#cb30-3"></a>b <span class="op">=</span> a <span class="co"># 変数aに格納されているオブジェクトIDを複製して、変数bに格納する</span></span>
<span id="cb30-4"><a href="#cb30-4"></a><span class="bu">print</span>(<span class="ss">f&#39;id(a) =&gt; </span><span class="sc">{</span><span class="bu">id</span>(a)<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb30-5"><a href="#cb30-5"></a><span class="bu">print</span>(<span class="ss">f&#39;id(b) =&gt; </span><span class="sc">{</span><span class="bu">id</span>(b)<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb30-6"><a href="#cb30-6"></a></span>
<span id="cb30-7"><a href="#cb30-7"></a><span class="bu">print</span>(<span class="ss">f&#39;a==b         =&gt; </span><span class="sc">{</span>a<span class="op">==</span>b<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb30-8"><a href="#cb30-8"></a><span class="bu">print</span>(<span class="ss">f&#39;id(a)==id(b) =&gt; </span><span class="sc">{</span><span class="bu">id</span>(a)<span class="op">==</span><span class="bu">id</span>(b)<span class="sc">}</span><span class="ss">&#39;</span>)</span></code></pre></div>
      <div class="sourceCode" id="cb31" data-caption="id2.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb31-2"><a href="#cb31-2"></a>a <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>]</span>
<span id="cb31-3"><a href="#cb31-3"></a>b <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>] <span class="co"># 新たに[10,20,30]が生成され、そのオブジェクトIDが変数bに格納される</span></span>
<span id="cb31-4"><a href="#cb31-4"></a><span class="bu">print</span>(<span class="ss">f&#39;id(a) =&gt; </span><span class="sc">{</span><span class="bu">id</span>(a)<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb31-5"><a href="#cb31-5"></a><span class="bu">print</span>(<span class="ss">f&#39;id(b) =&gt; </span><span class="sc">{</span><span class="bu">id</span>(b)<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb31-6"><a href="#cb31-6"></a></span>
<span id="cb31-7"><a href="#cb31-7"></a><span class="bu">print</span>(<span class="ss">f&#39;a==b         =&gt; </span><span class="sc">{</span>a<span class="op">==</span>b<span class="sc">}</span><span class="ss">&#39;</span>)          <span class="co"># True</span></span>
<span id="cb31-8"><a href="#cb31-8"></a><span class="bu">print</span>(<span class="ss">f&#39;id(a)==id(b) =&gt; </span><span class="sc">{</span><span class="bu">id</span>(a)<span class="op">==</span><span class="bu">id</span>(b)<span class="sc">}</span><span class="ss">&#39;</span>)  <span class="co"># False</span></span></code></pre></div>
      <h3 data-number="5.5.1"
      id="オブジェクトidからオブジェクトを参照する"><span
      class="header-section-number">5.5.1</span>
      オブジェクトIDからオブジェクトを参照する</h3>
      <p>オブジェクトIDからオブジェクトを参照する方法を紹介しますが、通常のプログラムでは利用しません。非推奨です。あくまで、動作を理解するための実験に使ってください。</p>
      <div class="sourceCode" id="cb32"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb32-2"><a href="#cb32-2"></a><span class="im">import</span> _ctypes</span>
<span id="cb32-3"><a href="#cb32-3"></a></span>
<span id="cb32-4"><a href="#cb32-4"></a>x<span class="op">=</span><span class="dv">10</span></span>
<span id="cb32-5"><a href="#cb32-5"></a><span class="bu">print</span>(<span class="ss">f&#39;id(x) = </span><span class="sc">{</span><span class="bu">id</span>(x)<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb32-6"><a href="#cb32-6"></a><span class="bu">print</span>(<span class="ss">f&#39;type(id(x)) = </span><span class="sc">{</span><span class="bu">type</span>(<span class="bu">id</span>(x))<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb32-7"><a href="#cb32-7"></a></span>
<span id="cb32-8"><a href="#cb32-8"></a><span class="co"># id(x)からオブジェクトを取得</span></span>
<span id="cb32-9"><a href="#cb32-9"></a>X<span class="op">=</span>_ctypes.PyObj_FromPtr(<span class="bu">id</span>(x))</span>
<span id="cb32-10"><a href="#cb32-10"></a><span class="bu">print</span>(<span class="ss">f&#39;id(x)から取得したオブジェクト =&gt; </span><span class="sc">{</span>X<span class="sc">}</span><span class="ss">&#39;</span>)</span></code></pre></div>
      <h2 data-number="5.6"
      id="理屈は分かったものの不便ではないか"><span
      class="header-section-number">5.6</span>
      理屈は分かったものの不便ではないか</h2>
      <p>プログラムのなかで、あるリストを複製して、それを少しだけ変更して使いたい場合があります
      (当然ながら、複製元には影響を与えずに) 。そのようなとき単純に
      <code>b=a</code>
      のようにリストをコピーするのではダメであることを学びました。</p>
      <p>そのような目的のためには、次のようなプログラムを書く必要があります。</p>
      <div class="sourceCode" id="cb33" data-caption="copy1.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb33-2"><a href="#cb33-2"></a>a <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>]</span>
<span id="cb33-3"><a href="#cb33-3"></a></span>
<span id="cb33-4"><a href="#cb33-4"></a>b <span class="op">=</span> [<span class="dv">0</span>]<span class="op">*</span><span class="bu">len</span>(a) <span class="co"># aと同じ要素数でbを初期化</span></span>
<span id="cb33-5"><a href="#cb33-5"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(a)): <span class="co"># 要素を1個1個コピー</span></span>
<span id="cb33-6"><a href="#cb33-6"></a>  b[i]<span class="op">=</span>a[i]</span>
<span id="cb33-7"><a href="#cb33-7"></a></span>
<span id="cb33-8"><a href="#cb33-8"></a><span class="cf">assert</span> a<span class="op">==</span>b          <span class="co"># オブジェクトの値は同じだが</span></span>
<span id="cb33-9"><a href="#cb33-9"></a><span class="cf">assert</span> <span class="bu">id</span>(a)<span class="op">!=</span><span class="bu">id</span>(b)  <span class="co"># オブジェクトとしては別物</span></span>
<span id="cb33-10"><a href="#cb33-10"></a></span>
<span id="cb33-11"><a href="#cb33-11"></a>b[<span class="dv">1</span>]<span class="op">=</span><span class="dv">10</span>  <span class="co"># 複製したものを部分変更</span></span>
<span id="cb33-12"><a href="#cb33-12"></a></span>
<span id="cb33-13"><a href="#cb33-13"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; a=[10, 20, 30]</span></span>
<span id="cb33-14"><a href="#cb33-14"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; b=[10, 10, 30] # 複製先だけが変更されている</span></span></code></pre></div>
      <p>ただし、上記の <code>copy1.py</code>
      のようなプログラムは２次元リスト、3次元リスト、あるいは、辞書を要素とする場合には、その階層分だけ複製処理を繰返す必要があります。</p>
      <p>例えば、次の <code>copy1-a.py</code>
      では意図するコピーができていません。</p>
      <div class="sourceCode" id="cb34" data-caption="copy1-a.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb34-2"><a href="#cb34-2"></a>a <span class="op">=</span> [[<span class="dv">10</span>,<span class="dv">20</span>],[<span class="dv">30</span>,<span class="dv">40</span>]] <span class="co"># 2次元リスト</span></span>
<span id="cb34-3"><a href="#cb34-3"></a></span>
<span id="cb34-4"><a href="#cb34-4"></a><span class="co"># 詰めの甘いコピー</span></span>
<span id="cb34-5"><a href="#cb34-5"></a>b <span class="op">=</span> [<span class="dv">0</span>]<span class="op">*</span><span class="bu">len</span>(a)</span>
<span id="cb34-6"><a href="#cb34-6"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(a)):</span>
<span id="cb34-7"><a href="#cb34-7"></a>  b[i]<span class="op">=</span>a[i]</span>
<span id="cb34-8"><a href="#cb34-8"></a></span>
<span id="cb34-9"><a href="#cb34-9"></a>b[<span class="dv">1</span>][<span class="dv">0</span>]<span class="op">=</span><span class="dv">10</span>  <span class="co"># 複製したものを部分変更</span></span>
<span id="cb34-10"><a href="#cb34-10"></a></span>
<span id="cb34-11"><a href="#cb34-11"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; a=[[10, 20], [10, 40]] # 複製元も影響を受けた</span></span>
<span id="cb34-12"><a href="#cb34-12"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; b=[[10, 20], [10, 40]]</span></span></code></pre></div>
      <p>この問題は、次の <code>copy1-b.py</code>
      ように解決する必要があります。</p>
      <div class="sourceCode" id="cb35" data-caption="copy1-b.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb35-2"><a href="#cb35-2"></a>a <span class="op">=</span> [[<span class="dv">10</span>,<span class="dv">20</span>],[<span class="dv">30</span>,<span class="dv">40</span>]]</span>
<span id="cb35-3"><a href="#cb35-3"></a></span>
<span id="cb35-4"><a href="#cb35-4"></a><span class="co"># 深く奥までコピーする</span></span>
<span id="cb35-5"><a href="#cb35-5"></a>b <span class="op">=</span> [<span class="dv">0</span>]<span class="op">*</span><span class="bu">len</span>(a)</span>
<span id="cb35-6"><a href="#cb35-6"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(a)):</span>
<span id="cb35-7"><a href="#cb35-7"></a>  b[i] <span class="op">=</span> [<span class="dv">0</span>]<span class="op">*</span><span class="bu">len</span>(a[i])</span>
<span id="cb35-8"><a href="#cb35-8"></a>  <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(a[i])):</span>
<span id="cb35-9"><a href="#cb35-9"></a>    b[i][j]<span class="op">=</span>a[i][j]</span>
<span id="cb35-10"><a href="#cb35-10"></a></span>
<span id="cb35-11"><a href="#cb35-11"></a>b[<span class="dv">1</span>][<span class="dv">0</span>]<span class="op">=</span><span class="dv">10</span>  <span class="co"># 複製したものを部分変更</span></span>
<span id="cb35-12"><a href="#cb35-12"></a></span>
<span id="cb35-13"><a href="#cb35-13"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; a=[[10, 20], [30, 40]] </span></span>
<span id="cb35-14"><a href="#cb35-14"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; b=[[10, 20], [10, 40]] # 複製先だけが変更されている</span></span></code></pre></div>
      <p>しかし、これは階層が増えてくると明らかに面倒です
      (バグの温床にもなります)。このようなときは <code>copy</code>
      モジュールを使用し、<code>copy2.py</code>
      のように記述します。こちらは、２次元リスト、3次元リスト、あるいは、辞書を要素とする場合でも問題なく対応してくれます。</p>
      <div class="sourceCode" id="cb36" data-caption="copy2.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1"></a><span class="op">%</span>reset <span class="op">-</span>f</span>
<span id="cb36-2"><a href="#cb36-2"></a><span class="im">import</span> copy <span class="co"># 要import</span></span>
<span id="cb36-3"><a href="#cb36-3"></a>a <span class="op">=</span> [[<span class="dv">10</span>,<span class="dv">20</span>],[<span class="dv">30</span>,<span class="dv">40</span>]]</span>
<span id="cb36-4"><a href="#cb36-4"></a>b <span class="op">=</span> copy.deepcopy(a) <span class="co"># この1行で深いコピー</span></span>
<span id="cb36-5"><a href="#cb36-5"></a></span>
<span id="cb36-6"><a href="#cb36-6"></a>b[<span class="dv">1</span>][<span class="dv">0</span>]<span class="op">=</span><span class="dv">10</span>  <span class="co"># 複製したものを部分変更</span></span>
<span id="cb36-7"><a href="#cb36-7"></a></span>
<span id="cb36-8"><a href="#cb36-8"></a><span class="bu">print</span>(<span class="ss">f&#39;a=</span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; a=[[10, 20], [30, 40]]</span></span>
<span id="cb36-9"><a href="#cb36-9"></a><span class="bu">print</span>(<span class="ss">f&#39;b=</span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">&#39;</span>) <span class="co"># =&gt; b=[[10, 20], [10, 40]]</span></span></code></pre></div>
      <p>ここで <code>b=a</code> のようなオブジェクトIDだけのコピーを
      <strong><em>浅いコピー</em></strong> (Shallow
      Copy)、それに対してオブジェクトそのものの複製をつくることを
      <strong><em>深いコピー</em></strong> (Deep Copy) と言います。</p>
      <!-- ---------------------------------------- -->
    </main>

    <footer class="markdown-body">
      <p><a href="https://takeshiwada1980.github.io/Programming1-2023/">講義資料のIndexに移動</a></p>
    </footer>

    <script>
      window.onload = function () {
        // ナビゲーション関連
        let openBtn = document.getElementsByClassName("openbtn")[0];
        let navPnl = document.getElementById("g-nav");
        openBtn.onclick = () => {
          openBtn.classList.toggle("active");
          navPnl.classList.toggle("panelactive");
        };

        let items = navPnl.getElementsByTagName("a");
        Array.from(items).forEach((item) => {
          item.onclick = () => {
            openBtn.classList.toggle("active");
            navPnl.classList.toggle("panelactive");
          };
        });

        // マスク処理
        let maskedSpans = document.getElementsByClassName("masked");
        Array.from(maskedSpans).forEach((span) => {
          span.onclick = () => {
            span.classList.toggle("open");
          };
        });

        // 画像にリンクを付与
        let images = document.querySelectorAll("figure img");
        Array.from(images).forEach((img) => {
          img.onclick = () => {
            location.href = img.getAttribute("src");
          };
        });
      };
    </script>
  </body>
</html>
